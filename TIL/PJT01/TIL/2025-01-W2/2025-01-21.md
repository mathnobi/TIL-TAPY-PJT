# TIL - 2025/01/21


## 오늘 한 일
- API 명세서, 아키텍처설계, ERD 다이어그램램 컨설턴트님, 코치님께 피드백 듣기
- API 명세서, DTO, ERD 수정
- AI 키워드 데이터 정제

<br>

## 문제가 있었던 것
- AI 대화 채팅방 만들 때, 키워드 선택 후 방 생성 하고 바로 접속까지 한 개의 api로 가능할까? 아니면 선택 후 방 생성을 1개의 api, 접속을 1개의 api로 따로 빼야 할까?
  - 나눴을 때의 장점이 없다면 하나의 API로 하는게 좋다.
  - 백이 편하면 사용자가 불편하다.
  - API는 프론트와 협의를 하는게 좋다. 프론트 입장에서는 1개만 있는게 편하다. 사용자도 편하다.
- 상대가 사용자에게 남긴 피드백이 어떻게 사용자에게 저장되는지 고민했다.
- 블랙리스트를 잊고 있었다.
- 우리는 대화를 할 때 실시간으로 대화 내용을 DB에 넣는다. 방이 끝나면 대화 리포트 id가 만들어진다. 대화 리포트 id가 만들어지면 각각의 대화 내용에 대해 부여가 된다. 효율적인 방법인지 잘 모르겠다.
  - 대화방 entity, 피드백 entity, 블랙리스트 entity를 추가했다.

방 정보를 저장하지 않기 때문에 이 방법을 쓰고 있다. 방 정보를 db에 저장하고, 실시간으로 대화가 저장 될 때 방 정보를 같이 넣는 게 맞을까? => 근데 그러면 대화 내용 erd랑 중복 되니까,
    1. 방 정보는 openvidu
    2. 방이라는 entity .
    3. 이상하다!!!! 방 정보가 있어야 한다!!!!!!!
    4. 동일한 사람과 여러번 했을 때 구분이 안될 수 있다. 같은 키워드 여러번 하면 식별 x
    5. 방이 없을 때의 장점, 개발하기 편하면 사용자가 불편해진다.
    6. 유저 이름은 ai 안됨!
    7. 말 할 때마다 계속 넣는게 좋지 않다. 로컬에 저장해놨다가 한번에 저장하는게 낫다. 특별한게 아니라면
    8. 한번에 보내기 힘든 거 아니라면 한번에 보내랑!
    9. 한 번 request 보내는게 생각보다 느려! 한번에 묶어서 보내! 네트워크가 생각보다 지연되는 경우가 많다. 사용자 데이터를 잃어버릴 수도 있기는 하지만, 이게 훨씬 낫다.
    10. 대화 리포트 id가 방 번호를 대신하는 방법은?  ⇒ 이것도 상관 없다. 방 정보를 저장하는 것 말고 대화 리포트 id로 대체 하는 방법!
        1. 우리 선택일 듯
        2. 컨설턴트님이 말씀하신게 더 자연스럽,,
        3. 방 번호,, 필요해지고,,,스읍,,
        4. 이게 낫냐 저게 낫나… 
    11. 대화 리포트 생성 후 id 넣기 이런건 별로임. 이렇게 하지 말 것
    12. erd 그릴 때 흐름에 따라 그리기
        1. 대화를 위에, 리포트를 아래에,,
        2. 분석용 db는 따로 있다. 보통은! erd rdb(실시간 처리가 중요한 공유 데이터, 정규화 돼야 함) oltp? olap? analytic db 얘네가 보고서 만들 때 쓴다. db도 다르다. 
        3. 신용보고서 그것도 리포트인데 리포트를 만들자 해서 거기에 채워넣는 형식이었따.

<br>

## 새로 배운 것
### 팀 프로젝트
- 적당한 휴식시간이 정말 중요하다다

### 개인 공부
- DTO에 대해 완전히 익힐 수 있었다.
- 백에서 논리 흐름을 하나 하나 다 분석하는게 얼마나 중요한지 알았다.

<br>

## 아직 잘 모르는 것, 부족한 것
- local AI를 컴퓨터에서 직접 다루는 게 싸피에서 내가 처음일거라는 소리를 들었다.
  - 네...?
  - 근데 걱정보단 설렌다

<br>

## 잘 한 것
- DTO 분석 잘 했다! 고생했다 ㅎㅎ